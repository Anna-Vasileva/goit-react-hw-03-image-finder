{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Loader/Loader.js","components/Modal/Modal.js","helpers/mapper.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","inputData","changeValue","event","setState","currentTarget","value","handleSubmit","e","preventDefault","props","onSubmit","reset","className","s","SearchForm","this","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","id","webformatURL","largeImageURL","onClick","src","alt","ImageGallery","gallery","onClickPicture","map","Button","Loader","color","height","width","timeout","modalRoot","document","querySelector","Modal","modalKeyDown","code","onClose","modalBackDropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","children","mapper","hits","INITIAL_STATE","page","KEY","App","isLoading","query","showModal","changeInputData","data","getImages","fetch","then","res","json","pictures","prevState","catch","err","console","log","finally","scroll","length","incrementPage","toggleModal","newLargeImageURL","getAttribute","hasAttribute","scrollTo","top","documentElement","scrollHeight","behavior","prevProps","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.33a1c21d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2DXTp\",\"ImageGalleryItem-image\":\"ImageGalleryItem_ImageGalleryItem-image__2q_nC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__23R_X\",\"Modal\":\"Modal_Modal__OGMs0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1ls7X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3lYVs\"};","import React, { Component } from \"react\";\r\nimport s from \"./Searchbar.module.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    inputData: \"\",\r\n  };\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n  };\r\n  changeValue = (event) => {\r\n    this.setState({ inputData: event.currentTarget.value });\r\n  };\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    this.props.onSubmit(this.state);\r\n    this.reset();\r\n  };\r\n  reset = () => {\r\n    this.setState({ inputData: \"\" });\r\n  };\r\n  render() {\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={s[\"SearchForm-button\"]}>\r\n            <span className={s[\"SearchForm-button-label\"]}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={s[\"SearchForm-input\"]}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.changeValue}\r\n            value={this.state.inputData}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from \"./ImageGalleryItem.module.css\";\r\n\r\nconst ImageGalleryItem = ({ id, webformatURL, largeImageURL, onClick }) => {\r\n  return (\r\n    <li\r\n      className={s.ImageGalleryItem}\r\n      key={id}\r\n      onClick={onClick}\r\n      data-list\r\n      data-large-img={largeImageURL}\r\n    >\r\n      <img\r\n        src={webformatURL}\r\n        alt=\"изображение pixabay\"\r\n        className={s[\"ImageGalleryItem-image\"]}\r\n      />\r\n    </li>\r\n  );\r\n};\r\nImageGalleryItem.propTypes = {\r\n  id: PropTypes.number.isRequired,\r\n  webformatURL: PropTypes.string,\r\n  largeImageURL: PropTypes.string,\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem\";\r\nimport s from \"./ImageGallery.module.css\";\r\n\r\nconst ImageGallery = ({ gallery, onClickPicture }) => {\r\n  return (\r\n    <ul className={s.ImageGallery}>\r\n      {gallery.map(({ id, webformatURL, largeImageURL }) => {\r\n        return (\r\n          <ImageGalleryItem\r\n            id={id}\r\n            webformatURL={webformatURL}\r\n            largeImageURL={largeImageURL}\r\n            onClick={onClickPicture}\r\n          />\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nImageGallery.propTypes = {\r\n  gallery: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n      webformatURL: PropTypes.string,\r\n      largeImageURL: PropTypes.string,\r\n    })\r\n  ),\r\n  onClickPicture: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from \"./Button.module.css\";\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <button type=\"button\" onClick={onClick} className={s.Button}>\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;\r\n","import LoaderSpinner from \"react-loader-spinner\";\r\n\r\nconst Loader = () => (\r\n  <div>\r\n    <LoaderSpinner\r\n      type=\"ThreeDots\"\r\n      color=\"pink\"\r\n      height={100}\r\n      width={100}\r\n      timeout={10000}\r\n    />\r\n  </div>\r\n);\r\n\r\nexport default Loader;\r\n","import React, { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport s from \"./Modal.module.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nclass Modal extends Component {\r\n  static propTypes = {\r\n    onClose: PropTypes.func.isRequired,\r\n    children: PropTypes.node.isRequired,\r\n  };\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.modalKeyDown);\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.modalKeyDown);\r\n  }\r\n  modalKeyDown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  modalBackDropClick = (e) => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  render() {\r\n    return createPortal(\r\n      <div className={s.Overlay} onClick={this.modalBackDropClick}>\r\n        <div className={s.Modal}>\r\n          {this.props.children}\r\n          {/* <img\r\n          src=\"https://image.tmdb.org/t/p/w400/zZMebBIsNipjFhJFv0zjm0KQaBF.jpg\"\r\n          alt=\"изображение pixabay\"\r\n        /> */}\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","const mapper = (hits) => {\r\n  return hits.map(({ id, webformatURL, largeImageURL }) => ({\r\n    id,\r\n    webformatURL,\r\n    largeImageURL,\r\n  }));\r\n};\r\nexport default mapper;\r\n","import React, { Component } from \"react\";\nimport Searchbar from \"./components/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery\";\nimport Button from \"./components/Button\";\nimport \"./App.css\";\nimport Loader from \"./components/Loader\";\nimport Modal from \"./components/Modal\";\nimport mapper from \"./helpers/mapper\";\n\nconst INITIAL_STATE = { page: 1, gallery: null };\nconst KEY = \"23417274-c745cca46d265f1806e9566e8\";\n// const apiKey = \"a92e1c28ff5839246667e5b68c28f141\";\n// const baseUrl = \"https://api.themoviedb.org/3/trending/movie/day\";\nclass App extends Component {\n  state = {\n    ...INITIAL_STATE,\n    isLoading: false,\n    query: \"\",\n    showModal: false,\n    largeImageURL: \"\",\n\n    // showModal: true,\n  };\n  componentDidMount() {\n    // fetch(`${baseUrl}?api_key=${apiKey}&page=${this.state.page}`)\n    //   .then((res) => res.json())\n    //   .then((pictures) => this.setState({ gallery: pictures }));\n    // this.getImages();\n  }\n  componentDidUpdate(prevProps, prevState) {\n    if (\n      prevState.query !== this.state.query ||\n      prevState.page !== this.state.page\n    ) {\n      // this.setState({ ...INITIAL_STATE, query: this.state.query });\n      this.getImages();\n    }\n    // if (prevState.page !== this.state.page) {\n    //   this.getImages();\n    // }\n    // if (prevState.showModal !== this.state.showModal) {\n\n    // }\n  }\n  changeInputData = (data) => {\n    this.setState({ ...INITIAL_STATE, query: data.inputData });\n  };\n  getImages = () => {\n    // if (!this.state.query) return;\n    this.setState({ isLoading: true });\n    fetch(\n      `https://pixabay.com/api/?q=${this.state.query}&page=${this.state.page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`\n    )\n      .then((res) => res.json())\n      .then((pictures) => {\n        // console.log(this.state.page);\n        // console.log(this.state.gallery);\n        this.setState((prevState) => {\n          return !prevState.gallery\n            ? { gallery: mapper(pictures.hits) }\n            : { gallery: [...prevState.gallery, ...mapper(pictures.hits)] };\n        });\n      })\n      .catch((err) => {\n        console.log(\"Что-то пошло не так\");\n      })\n      .finally(() => {\n        // console.log('finally');\n        // console.log(\"finally\", this.state.gallery);\n        this.setState({ isLoading: false });\n        if (this.state.page > 1) {\n          this.scroll();\n        }\n        if (this.state.gallery.length === 0) {\n          this.setState({ ...INITIAL_STATE });\n        }\n      });\n  };\n  incrementPage = () => {\n    let { page } = this.state;\n    page += 1;\n    this.setState({ page });\n  };\n  toggleModal = () => {\n    // this.setState((showModal) => ({ showModal: !showModal }));\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n  onClickPicture = (e) => {\n    const newLargeImageURL = e.currentTarget.getAttribute(\"data-large-img\");\n    if (e.currentTarget.hasAttribute(\"data-list\")) {\n      this.toggleModal();\n      this.setState(() => ({\n        largeImageURL: newLargeImageURL,\n      }));\n    }\n  };\n  scroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  };\n  render() {\n    const { isLoading, gallery, showModal, largeImageURL } = this.state;\n    return (\n      <>\n        <Searchbar onSubmit={this.changeInputData} />\n\n        {gallery && (\n          <ImageGallery\n            gallery={gallery}\n            onClickPicture={this.onClickPicture}\n          />\n        )}\n        {gallery && <Button onClick={this.incrementPage} />}\n        {isLoading && <Loader />}\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img\n              // src=\"https://image.tmdb.org/t/p/w400/zZMebBIsNipjFhJFv0zjm0KQaBF.jpg\"\n              src={largeImageURL}\n              alt=\"изображение pixabay\"\n            />\n          </Modal>\n        )}\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3c51_\",\"SearchForm\":\"Searchbar_SearchForm__1LAe1\",\"SearchForm-button\":\"Searchbar_SearchForm-button__3Ukam\",\"SearchForm-button-label\":\"Searchbar_SearchForm-button-label__aPKBw\",\"SearchForm-input\":\"Searchbar_SearchForm-input__2-Dau\"};"],"sourceRoot":""}